<?xml version="1.0" encoding="windows-1252" ?>
<!--Ant buildfile generated by Oracle JDeveloper-->
<!--Generated Sep 12, 2018 3:06:25 PM-->
<project xmlns="antlib:org.apache.tools.ant" name="Prepare11gProjects" default="prepareApplication" basedir=".">
  <property file="build.properties"/>
  <taskdef resource="net/sf/antcontrib/antlib.xml">
    <classpath>
      <pathelement location="${ant-contrib.jar}"/>
    </classpath>
  </taskdef>
  <target name="prepareApplication" description="Refactor SOA 11g Project pre upgrade to 12c." depends="">
    <echo>Prepare ${SOA11gAppName} in ${SOA11gAppFolder} </echo>
    <echo>. Delete jws file </echo>
    <delete file="${SOA11gAppFolder}/${SOA11gAppName}.jws"/>
    <echo>. Create basic .jws file ${SOA11gAppFolder}/${SOA11gAppName}.jws</echo>
    <xslt style="${prepareJwsXsl}" in="${jwsTemplate}" out="${SOA11gAppFolder}/${SOA11gAppName}.jws"/>
    <property name="adf-meta-inf" value="${SOA11gAppFolder}/.adf/META-INF"/>
    <echo>. Copy ${adfConfig} to ${adf-meta-inf}</echo>
    <mkdir dir="adf-meta-inf"/>
    <copy file="${adfConfig}" todir="${adf-meta-inf}"/>
    <echo>. Prepare projects</echo>
    <foreach target="PrepareProjectFile" param="projectFile">
      <fileset dir="${SOA11gAppFolder}" casesensitive="yes">
        <include name="**/*.jpr"/>
      </fileset>
    </foreach>
  </target>
  <target name="PrepareProjectFile">
    <echo message=".. Prepare ${projectFile}"></echo>
    <property name="projectFileOrg" value="${projectFile}.org"/>
    <echo message="... backup ${projectFile} to ${projectFileOrg}"></echo>
    <move file="${projectFile}" tofile="${projectFileOrg}" overwrite="false"/>
    <echo message="... transform ${projectFileOrg} to ${projectFile} using ${prepareJprXsl}"></echo>
    <xslt style="${prepareJprXsl}" in="${projectFile}.org" out="${projectFile}"/>
    <antcall target="addProjectFileToJws" inheritall="true"/>
  </target>
  <target name="addProjectFileToJws">
    <xslt style="${addProjectToJwsXsl}" in="${SOA11gAppFolder}/${SOA11gAppName}.jws"
          out="${SOA11gAppFolder}/${SOA11gAppName}.new.jws">
      <param name="projectFile" expression="${projectFile}"/>
    </xslt>
    <move file="${SOA11gAppFolder}/${SOA11gAppName}.new.jws" tofile="${SOA11gAppFolder}/${SOA11gAppName}.jws"
          overwrite="true"/>
  </target>
</project>
